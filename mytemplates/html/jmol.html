{% extends 'html/skeleton.html' %}
{%block jsmol_scripts %}
  <script type="text/javascript" src="/charmming/js/jsmol/JSmol.min.js"></script>
  <link rel="icon" type="image/xicon" href="/charmming/images/charmming-css/favicon.ico" />
  <link rel="shortcut icon" type="image/xicon" href="/charmming/images/charmming-css/favicon.ico" />
{%endblock%}
{% block content %}
  
  <h1 class="center_header">Visualization of structure {{structname}}</h1>
  <hr class="noshade_hr">
  <br />
  <div id="jsmol" class="qm_table">
    {%include "html/jsmol_initialize.html" %}
  <script>
      jmolApplet = Jmol.getApplet("jmolApplet", Info);
    {% if segid == "NA" and isProtein and not cg_model%}
       Jmol.script(jmolApplet,  "load /charmming/pdbuploads{{filepath}};anim mode palindrome 2 2; anim on; slab off; spin off; wireframe off; spacefill off; trace off; set ambient 40; set specpower 40; ribbons on; color structure;select [TIP];cpk 30%;wireframe 55;color jmol;");
    {% else %}
       {% if not cg_model %}  
       Jmol.script(jmolApplet, "load /charmming/pdbuploads{{filepath}};anim mode palindrome 2 2; anim on; {{resid}}; cpk 30%; wireframe 55; select {{resid}} and ( _O or _N ); label %a, %n");
       {% endif %}
        Jmol.script(jmolApplet, "load /charmming/pdbuploads{{filepath}};anim mode palindrome 2 2; anim on; cpk 30%; wireframe 55;");
        {% endif %}
       var displayDict = new Object();
       displayDict['ribbons'] = {% if isProtein and not cg_model%}true{%else%}false{%endif%};
       displayDict['ballandstick'] = {%if isProtein and not cg_model%}false{%else%}true{%endif%};
     </script>
     <br />
    {%include "html/display_options.html" %}
{% endblock %}
