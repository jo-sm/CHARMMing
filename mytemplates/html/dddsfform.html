{% extends "html/skeleton.html" %}

{% block content %}
<div id="mainpage">
<p style="color:{{message_color}}"><strong>{{message}}</strong></font></p>
<table  class="sortable resizable" style="background-color:#eeeee0;border: 1px solid black;" >
{% for tarfile in tarfiles %}
 <tr>
   <td><a href="/charmming/dd_infrastructure/downloadfile/{{tarfile.id}}">{{ tarfile.name }}</a></td>
 </tr>
{% endfor %}
</table>

{% ifequal message '' %}
<form id="dsfform" enctype="multipart/form-data" method="post" action="/charmming/dd_infrastructure/dsfform/">
<h2 class="center_header">Submit Docking Job</h2>
<h3 class="center_header">Working structure: {{ ws_identifier }}</h2>

    {% include "html/taskfiles.html" %}

<!--<h3>Select Target Conformation(s)</h1><br>Only Targets Belonging to the Current Project are Shown-->
<p style="color:{{message_color}};" class="fontsmall"><strong>{{message}}</strong></p>

<!--<form id="dsfform" enctype="multipart/form-data" method="post" action="/charmming/dd_infrastructure/dsfform/">
<div name="conformationsdiv" id="conformationsdiv" style="overflow:auto;width:95%;height:150px;border:1px solid #336699;padding-left:5px;text-align:left">
<table class="sortable resizable" width="100%" border=2>
<tr><th>Conformation Name</th><th>Conformation Description</th><th>Target PDB</th><th>Select</th></tr>
{% for conformation in conformations %}
        <tr><td>{{ conformation.name }}</td><td>{{ conformation.description }}</td><td>{{ conformation.target_pdb_code }}</td>
	<td> 
	    <table width="100%">
	    {% for conformation_file_object in conformation.file_objects_list %}
	      <tr><td>{{ conformation_file_object.file.description}}</td><td width=10 align="left"> <input id="id_conformation_file" type="checkbox" name="conformation_{{ conformation_file_object.file.id }}" onchange="getCheckedConformations(); "/> </td><tr>
	    {% endfor %}	
	    </table>
	</td>
{% endfor %}  
</table>
</div>
-->
<h3 class="center_header">Define Binding Site using Native Ligand</h2>
    {% include "html/anativefiles.html" %}
<!--<table>
<tr><td><label for="id_native_ligand"> Upload Native Ligand in <u>PDB</u> Format: </label></td><td><input type="file" name="native_ligand_file" id="id_native_ligand_file" /></td></tr>
</table>-->
<p style="text-align:center"><h3 class="center_header">Select Ligands to Dock</h4></p>
<div class='status'>
<table>
<tr>
<td>
<p>Select Grid Set:
<select name="ligandsets" id="ligandsets" onchange="RefreshDSFLigands();">
{% for set in existingsets %}
<option value='{{ set.id }}'>{{set.name}} ({{set.ligand_count}} ligands)</option>
{% endfor %}
</select></p>
</td>
</tr>
<tr><td>
<div id="ligandsdiv" style="overflow:auto;width:100%;height:300px;border:1px solid #336699;padding-left:5px;text-align:left">
</div>
</td></tr>
</table>
<hr class="noshade_hr">
       <br/>
<div id="estimatediv">
</div>
       
       <p style="text-align:center">Please enter a short description for this job<br>
       <input type="text" name="job_description" id="job_description"/><br><br>
       <input type="submit" value="Submit Docking Job"/>
       </p>
       <br>
       <br>

<script type="text/javascript">
   RefreshDSFLigands();
</script>

</form>
{% endifequal %}
</div>

{% endblock %}





